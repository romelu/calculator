!function(s){"use strict";var e,i,l=Array.prototype.slice;(i=function(e){this.options=s.extend({},i.defaults,e),this.parser=this.options.parser,this.locale=this.options.locale,this.messageStore=this.options.messageStore,this.languages={},this.init()}).prototype={init:function(){var r=this;String.locale=r.locale,String.prototype.toLocaleString=function(){var e,n,a,t,o,i,l;for(a=this.valueOf(),t=r.locale,o=0;t;){n=(e=t.split("-")).length;do{if(i=e.slice(0,n).join("-"),l=r.messageStore.get(i,a))return l;n--}while(n);if("en"===t)break;t=s.i18n.fallbacks[r.locale]&&s.i18n.fallbacks[r.locale][o]||r.options.fallbackLocale,s.i18n.log("Trying fallback locale for "+r.locale+": "+t+" ("+a+")"),o++}return""}},destroy:function(){s.removeData(document,"i18n")},load:function(e,n){var a,t,o,i={};if(e||n||(e="i18n/"+s.i18n().locale+".json",n=s.i18n().locale),"string"==typeof e&&"json"!==e.split("?")[0].split(".").pop()){for(i[n]=e+"/"+n+".json",a=(s.i18n.fallbacks[n]||[]).concat(this.options.fallbackLocale),t=0;t<a.length;t++)i[o=a[t]]=e+"/"+o+".json";return this.load(i)}return this.messageStore.load(e,n)},parse:function(e,n){var a=e.toLocaleString();return this.parser.language=s.i18n.languages[s.i18n().locale]||s.i18n.languages.default,""===a&&(a=e),this.parser.parse(a,n)}},s.i18n=function(e,n){var a,t=s.data(document,"i18n"),o="object"==typeof e&&e;return o&&o.locale&&t&&t.locale!==o.locale&&(String.locale=t.locale=o.locale),t||(t=new i(o),s.data(document,"i18n",t)),"string"==typeof e?(a=void 0!==n?l.call(arguments,1):[],t.parse(e,a)):t},s.fn.i18n=function(){var l=s.data(document,"i18n");return l||(l=new i,s.data(document,"i18n",l)),String.locale=l.locale,this.each(function(){var e,n,a,t,o=s(this),i=o.data("i18n");i?(e=i.indexOf("["),n=i.indexOf("]"),-1!==e&&-1!==n&&e<n?(a=i.slice(e+1,n),t=i.slice(n+1),"html"===a?o.html(l.parse(t)):o.attr(a,l.parse(t))):o.text(l.parse(i))):o.find("[data-i18n]").i18n()})},String.locale=String.locale||s("html").attr("lang"),String.locale||(void 0!==typeof window.navigator?(e=window.navigator,String.locale=e.language||e.userLanguage||""):String.locale=""),s.i18n.languages={},s.i18n.messageStore=s.i18n.messageStore||{},s.i18n.parser={parse:function(e,t){return e.replace(/\$(\d+)/g,function(e,n){var a=parseInt(n,10)-1;return void 0!==t[a]?t[a]:"$"+n})},emitter:{}},s.i18n.fallbacks={},s.i18n.debug=!1,s.i18n.log=function(){window.console&&s.i18n.debug&&window.console.log.apply(window.console,arguments)},i.defaults={locale:String.locale,fallbackLocale:"en",parser:s.i18n.parser,messageStore:s.i18n.messageStore},s.i18n.constructor=i}(jQuery);